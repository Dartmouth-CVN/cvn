<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping">

<hibernate-mapping package="model">

	<!-- User tables -->
	<class name="AbsUser" table="AbsUser">
		<id name="userId" column="USER_ID">
			<generator class="sequence" />
		</id>
		<property name="firstName" />
		<property name="lastName" />
		<property name="username" />
		<property name="password" />
		<property name="birthday" type="timestamp" />
		<property name="room" />
		<one-to-one name="contactInfo" class="Contact" cascade="save-update, delete" ></one-to-one>
		<!-- <one-to-one name="schedule" class="Schedule" cascade="save-update"></one-to-one> -->

		<!-- subclasses -->
		<union-subclass name="Patient" table="Patient">
			<list name="pets" table="Profile_Pet" cascade="save-update, delete" >
				<key column="petId" />
				<list-index column="patientPetIdx" />
				<one-to-many class="Pet" />
			</list>
			<list name="caregivers" table="Profile_Caregivers" cascade="save-update, delete" >
				<key column="caregiverId" />
				<list-index column="patientCareIdx" />
				<one-to-many class="Caregiver" />
			</list>
			<list name="assignedStaff" table="Profile_MedicalStaff" cascade="save-update, delete" >
				<key column="medId" />
				<list-index column="patientMedIdx" />
				<one-to-many class="MedicalStaff" />
			</list>
			<one-to-one name="healthProfile" class="HealthProfile"
				cascade="save-update, delete" ></one-to-one>
		</union-subclass>
		<union-subclass name="Administrator" table="Admin">
		</union-subclass>
		<union-subclass name="Caregiver" table="Caregiver">
			<property name="relation" />
			<property name="isFamily" />
		</union-subclass>
		<union-subclass name="MedicalStaff" table="MedicalStaff">
		</union-subclass>
		<!-- end subclasses -->
	</class>

	<!-- end User tables -->

	<!-- Profile elements -->

	<class name="Pet" table="Pet">
		<id name="petId">
			<generator class="native" />
		</id>
		<property name="name" />
		<property name="species" />
		<property name="allergyFriendly" />
	</class>

	<class name="Meal" table="Meal">
		<id name="mealId">
			<generator class="native" />
		</id>
		<property name="food" />
		<property name="rating" />
		<property name="calories" />
		<property name="notes" />
	</class>

	<class name="HealthProfile" table="HealthProfile">
		<id name="healthProfileId">
			<generator class="native" />
		</id>
		<list name="healthInfo" table="HealthInfo">
			<key column="healthInfoId" />
			<list-index column="healthAttributeIdx" />
			<one-to-many class="HealthInfo" />
		</list>
	</class>

	<class name="HealthInfo" table="HealthInfo">
		<id name="healthInfoId">
			<generator class="native" />
		</id>
<<<<<<< HEAD
=======
<<<<<<< HEAD
		<list name="attributes" table="HealthInfo_HealthAttribute">
			<key column="healthAttributeId" />
			<list-index column="healthAttributeIdx" />
			<one-to-many class="HealthAttribute" />
		</list>
=======
		<property name="date" type="timestamp" />
		<set name="healthAttributes" table="HealthInfo_HealthAttribute">
			<key column="healthInfoId" />
			<many-to-many column="healthAttributeId" class="HealthAttribute" />
		</set>
>>>>>>> dd52c074d6cb8cef20ca3017c800e659407b5dd8
>>>>>>> 9ad341692c0d0ccfae228f6536976e7353bc21b5
	</class>

	<class name="HealthAttribute" table="HealthAttribute">
		<id name="healthAttributeId">
			<generator class="native" />
		</id>
		<property name="name" />
		<property name="stringValue" />
	</class>

	<!-- ContactInfo -->
	<class name="Contact" table="Contact">
		<id name="contactId">
			<generator class="native" />
		</id>
		<list name="phoneNumbers" table="Contact_Number" cascade="save-update, delete" >
			<key column="contactId" />
			<list-index column="phoneElementId" />
			<one-to-many class="ContactElement" />
		</list>
		<list name="emails" table="Contact_Email" cascade="save-update, delete" >
			<key column="contactId" />
			<list-index column="emailElementId" />
			<one-to-many class="ContactElement" />
		</list>
		<list name="addresses" table="Contact_Address" cascade="save-update, delete" >
			<key column="contactId" />
			<list-index column="addressElementId" />
			<one-to-many class="ContactElement" />
		</list>
	</class>

	<class name="ContactElement" table="ContactElement" >
		<id name="elementId">
			<generator class="native" />
		</id>
		<property name="value" />
		<property name="type" />
	</class>

	<!-- Schedule <class name="Schedule" table="Schedule"> <id name="scheduleId"> 
		<generator class="native" /> </id> <list name="events" table="Schedule_Event"> 
		<key column="scheduleId" /> <many-to-many column="eventId" class="Event" 
		/> </list> </class> <class name="Event" table="Event"> <id name="eventId"> 
		<generator class="native" /> </id> <property name="date" type="timestamp" 
		/> <property name="location" /> <property name="notes" /> </class> end Schedule -->

</hibernate-mapping>